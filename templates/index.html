<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Love</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
    margin: 0;
    background: linear-gradient(135deg, #ff4e6a, #ff8fa3);
    font-family: Arial, sans-serif;
    color: white;
    text-align: center;
}

.screen {
    display: none;
    padding: 25px;
    min-height: 100vh;
    box-sizing: border-box;
}

.active {
    display: block;
}

h1 {
    font-size: 28px;
}

button {
    width: 80%;
    padding: 18px;
    font-size: 20px;
    margin-top: 20px;
    border: none;
    border-radius: 25px;
    background: white;
    color: #ff4e6a;
    font-weight: bold;
}

#game {
    position: relative;
    height: 60vh;
}

.heart {
    position: absolute;
    font-size: 38px;
    cursor: pointer;
}

.answer {
    background: white;
    color: #ff4e6a;
    margin: 12px auto;
    padding: 14px;
    width: 80%;
    border-radius: 20px;
    font-size: 18px;
}

#time {
    font-size: 24px;
    margin-top: 20px;
}
</style>
</head>

<body>

<!-- –°–¢–ê–†–¢ -->
<div id="start" class="screen active">
    <h1>‚ù§Ô∏è –£ –º–µ–Ω—è –¥–ª—è —Ç–µ–±—è –∫–æ–µ-—á—Ç–æ –µ—Å—Ç—å</h1>
    <button onclick="startGame()">–ù–∞—á–∞—Ç—å</button>
</div>

<!-- –ò–ì–†–ê -->
<div id="gameScreen" class="screen">
    <h1>–ù–∞–π–¥–∏ 5 —Å–µ—Ä–¥–µ—Ü ‚ù§Ô∏è</h1>
    <div id="game"></div>
    <div id="gameText"></div>
</div>

<!-- –¢–ï–°–¢ -->
<div id="testScreen" class="screen">
    <h1>–û—Ç–≤–µ—Ç—å —á–µ—Å—Ç–Ω–æ üòè</h1>
    <div id="question"></div>
</div>

<!-- –í–†–ï–ú–Ø -->
<div id="timeScreen" class="screen">
    <h1>–ú—ã –≤–º–µ—Å—Ç–µ —É–∂–µ:</h1>
    <div id="time"></div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

function show(id){
    document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

//
// 1Ô∏è‚É£ –ò–ì–†–ê
//
let found = 0;

function startGame(){
    show("gameScreen");
    spawnHeart();
}

function spawnHeart(){
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerHTML = "‚ù§Ô∏è";

    heart.style.left = Math.random()*80 + "%";
    heart.style.top = Math.random()*60 + "%";

    heart.onclick = () => {
        heart.remove();
        found++;

        if(found >= 5){
            document.getElementById("gameText").innerHTML =
            "<h2>–¢—ã –Ω–∞—à—ë–ª –º–æ—ë —Å–µ—Ä–¥—Ü–µ ‚ù§Ô∏è</h2>";

            setTimeout(startTest, 1500);
        } else {
            spawnHeart();
        }
    };

    document.getElementById("game").appendChild(heart);
}

//
// 2Ô∏è‚É£ –¢–ï–°–¢
//
const questions = [
{
    q: "–¢—ã –º–µ–Ω—è –ª—é–±–∏—à—å?",
    a: ["–î–∞", "–û—á–µ–Ω—å", "–ë–µ–∑—É–º–Ω–æ"]
},
{
    q: "–ö—Ç–æ —Å–∞–º—ã–π –ª—É—á—à–∏–π —á–µ–ª–æ–≤–µ–∫?",
    a: ["–¢—ã", "–¢–æ–ª—å–∫–æ —Ç—ã", "–ö–æ–Ω–µ—á–Ω–æ —Ç—ã"]
}
];

let qIndex = 0;

function startTest(){
    show("testScreen");
    renderQuestion();
}

function renderQuestion(){
    const q = questions[qIndex];
    let html = "<h2>"+q.q+"</h2>";

    q.a.forEach(ans => {
        html += `<div class="answer" onclick="nextQ()">${ans}</div>`;
    });

    document.getElementById("question").innerHTML = html;
}

function nextQ(){
    qIndex++;

    if(qIndex >= questions.length){
        startTimeScreen();
    } else {
        renderQuestion();
    }
}

//
// 3Ô∏è‚É£ –í–†–ï–ú–Ø –í–ú–ï–°–¢–ï
//
function startTimeScreen(){
    show("timeScreen");

    // ‚ö†Ô∏è –ü–û–°–¢–ê–í–¨ –°–í–û–Æ –î–ê–¢–£
    const startDate = new Date("2024-11-01");

    function update(){
        const now = new Date();
        const diff = now - startDate;

        const days = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor(diff / (1000*60*60));
        const minutes = Math.floor(diff / (1000*60));
        const seconds = Math.floor(diff / 1000);

        document.getElementById("time").innerHTML =
            days + " –¥–Ω–µ–π<br>" +
            hours + " —á–∞—Å–æ–≤<br>" +
            minutes + " –º–∏–Ω—É—Ç<br>" +
            seconds + " —Å–µ–∫—É–Ω–¥ ‚ù§Ô∏è";
    }

    update();
    setInterval(update, 1000);
}
</script>

</body>
</html>
