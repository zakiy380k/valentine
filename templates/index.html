<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Love App</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
    margin: 0;
    height: 100vh;
    background: linear-gradient(135deg, #ff4e6a, #ff8fa3);
    font-family: Arial;
    color: white;
    text-align: center;
    overflow: hidden;
}

.screen {
    display: none;
    padding-top: 60px;
}

.active {
    display: block;
}

button {
    padding: 15px 25px;
    font-size: 18px;
    margin: 10px;
    border: none;
    border-radius: 20px;
    background: white;
    color: #ff4e6a;
    cursor: pointer;
}

#game {
    position: relative;
    height: 70vh;
}

.heart {
    position: absolute;
    font-size: 30px;
    cursor: pointer;
}

.answer {
    background: white;
    color: #ff4e6a;
    margin: 8px;
    padding: 10px;
    border-radius: 15px;
}
</style>
</head>

<body>

<!-- –≠–ö–†–ê–ù 1 -->
<div id="startScreen" class="screen active">
    <h1>‚ù§Ô∏è –ú–∞–ª–µ–Ω—å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç–µ–±—è</h1>
    <button onclick="openMenu()">–ù–∞—á–∞—Ç—å</button>
</div>

<!-- –≠–ö–†–ê–ù 2 -->
<div id="menuScreen" class="screen">
    <h2>–í—ã–±–µ—Ä–∏ —á—Ç–æ –æ—Ç–∫—Ä—ã—Ç—å</h2>
    <button onclick="startGame()">–ù–∞–π—Ç–∏ —Å–µ—Ä–¥—Ü–µ</button>
    <button onclick="startTest()">–¢–µ—Å—Ç</button>
    <button onclick="showTime()">–°–∫–æ–ª—å–∫–æ –º—ã –≤–º–µ—Å—Ç–µ</button>
</div>

<!-- –ò–ì–†–ê -->
<div id="gameScreen" class="screen">
    <h2>–ù–∞–π–¥–∏ —Å–µ—Ä–¥—Ü–µ ‚ù§Ô∏è</h2>
    <div id="game"></div>
    <div id="gameResult"></div>
</div>

<!-- –¢–ï–°–¢ -->
<div id="testScreen" class="screen">
    <h2>–ù–µ–±–æ–ª—å—à–æ–π —Ç–µ—Å—Ç üòè</h2>
    <div id="question"></div>
</div>

<!-- –í–†–ï–ú–Ø –í–ú–ï–°–¢–ï -->
<div id="timeScreen" class="screen">
    <h2>–ú—ã –≤–º–µ—Å—Ç–µ —É–∂–µ:</h2>
    <div id="timeResult" style="font-size:22px;margin-top:20px;"></div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

function show(id) {
    document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

function openMenu() {
    show("menuScreen");
}

//
// 1Ô∏è‚É£ –ò–ì–†–ê: –ù–ê–ô–¢–ò –°–ï–†–î–¶–ï
//
let found = 0;

function startGame() {
    show("gameScreen");
    found = 0;
    document.getElementById("game").innerHTML = "";
    spawnHeart();
}

function spawnHeart() {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerHTML = "‚ù§Ô∏è";

    heart.style.left = Math.random()*90 + "%";
    heart.style.top = Math.random()*70 + "%";

    heart.onclick = () => {
        heart.remove();
        found++;

        if(found === 5){
            document.getElementById("gameResult").innerHTML =
            "–¢—ã –Ω–∞—à—ë–ª –º–æ—ë —Å–µ—Ä–¥—Ü–µ ‚ù§Ô∏è";
        } else {
            spawnHeart();
        }
    };

    document.getElementById("game").appendChild(heart);
}

//
// 2Ô∏è‚É£ –¢–ï–°–¢
//
const questions = [
{
    q: "–¢—ã –º–µ–Ω—è –ª—é–±–∏—à—å?",
    a: ["–î–∞", "–û—á–µ–Ω—å", "–ë–µ–∑—É–º–Ω–æ"]
},
{
    q: "–ö—Ç–æ —Å–∞–º—ã–π –ª—É—á—à–∏–π —á–µ–ª–æ–≤–µ–∫?",
    a: ["–¢—ã", "–ö–æ–Ω–µ—á–Ω–æ —Ç—ã", "–¢–æ–ª—å–∫–æ —Ç—ã"]
}
];

let qIndex = 0;

function startTest(){
    show("testScreen");
    qIndex = 0;
    renderQuestion();
}

function renderQuestion(){
    const q = questions[qIndex];
    let html = "<h3>"+q.q+"</h3>";

    q.a.forEach(ans => {
        html += `<div class="answer" onclick="nextQ()">${ans}</div>`;
    });

    document.getElementById("question").innerHTML = html;
}

function nextQ(){
    qIndex++;
    if(qIndex >= questions.length){
        document.getElementById("question").innerHTML =
        "<h3>–¢—ã –ø—Ä–æ—à—ë–ª —Ç–µ—Å—Ç ‚ù§Ô∏è</h3>";
    } else {
        renderQuestion();
    }
}

//
// 3Ô∏è‚É£ –°–ö–û–õ–¨–ö–û –í–ú–ï–°–¢–ï
//
function showTime(){
    show("timeScreen");

    // –í–ê–ñ–ù–û: –ø–æ—Å—Ç–∞–≤—å —Å–≤–æ—é –¥–∞—Ç—É
    const startDate = new Date("2024-09-01");

    const now = new Date();
    const diff = now - startDate;

    const days = Math.floor(diff / (1000*60*60*24));
    const minutes = Math.floor(diff / (1000*60));

    document.getElementById("timeResult").innerHTML =
        days + " –¥–Ω–µ–π<br>" +
        minutes + " –º–∏–Ω—É—Ç ‚ù§Ô∏è";
}
</script>

</body>
</html>
