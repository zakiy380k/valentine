<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Love</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
    margin: 0;
    background: linear-gradient(135deg, #ff4e6a, #ff8fa3);
    font-family: Arial, sans-serif;
    color: white;
    text-align: center;
}

.screen {
    display: none;
    padding: 25px;
    min-height: 100vh;
    box-sizing: border-box;
}

.active {
    display: block;
}

h1 {
    font-size: 28px;
}

button {
    width: 80%;
    padding: 18px;
    font-size: 20px;
    margin-top: 20px;
    border: none;
    border-radius: 25px;
    background: white;
    color: #ff4e6a;
    font-weight: bold;
}

#game {
    position: relative;
    height: 60vh;
}

.heart {
    position: absolute;
    font-size: 38px;
    cursor: pointer;
}

.answer {
    background: white;
    color: #ff4e6a;
    margin: 12px auto;
    padding: 14px;
    width: 80%;
    border-radius: 20px;
    font-size: 18px;
}

#time {
    font-size: 24px;
    margin-top: 20px;
}


@keyframes fall {
    from { transform: translateY(0); }
    to { transform: translateY(100vh); }
}

</style>
</head>

<body>

<!-- –°–¢–ê–†–¢ -->
<div id="start" class="screen active">
    <h1>‚ù§Ô∏è –ê–Ω—É —Ä–∞—Å—á–µ—Ö–ª—è–π –±—É—Å–∏–Ω–∫–∞</h1>
    <button onclick="startGame()">–†–∞—Å—á–µ—Ö–ª–∏—Ç—å</button>
</div>

<!-- –ò–ì–†–ê -->
<div id="gameScreen" class="screen">
    <h1>–ù–∞–π–¥–∏ 5 —Å–µ—Ä–¥–µ—Ü ‚ù§Ô∏è</h1>
    <div id="game"></div>
    <div id="gameText"></div>
</div>

<!-- –¢–ï–°–¢ -->
<div id="testScreen" class="screen">
    <h1>–û—Ç–≤–µ—Ç—å —á–µ—Å—Ç–Ω–æ üòè</h1>
    <div id="question"></div>
</div>

<!-- –í–†–ï–ú–Ø -->
<div id="timeScreen" class="screen">
    <h1>–ó–Ω–∞–∫–æ–º—ã —É–∂–µ:</h1>
    <div id="time"></div>

    <div id="finalText" style="margin-top:25px;font-size:26px;opacity:0;transition:1s;">
        –Ø —Ç–µ–±—è –ª—é–±–ª—é ‚ù§Ô∏è
    </div>

    <button id="secretBtn" style="opacity:0;" onclick="showSecret()">
        –û—Ç–∫—Ä—ã—Ç—å —Å–µ–∫—Ä–µ—Ç
    </button>

    <div id="secret" style="margin-top:20px;font-size:22px;display:none;">
        –¢—ã —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —á–µ–ª–æ–≤–µ–∫ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏ üíñ
    </div>

    <div id="confetti"></div>
</div>


<script>
const tg = window.Telegram.WebApp;
tg.expand();

function show(id){
    document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

//
// 1Ô∏è‚É£ –ò–ì–†–ê
//
let found = 0;

function startGame(){
    show("gameScreen");
    spawnHeart();
}

function spawnHeart(){
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerHTML = "‚ù§Ô∏è";

    heart.style.left = Math.random()*80 + "%";
    heart.style.top = Math.random()*60 + "%";

    heart.onclick = () => {
        heart.remove();
        found++;

        if(found >= 5){
            document.getElementById("gameText").innerHTML =
            "<h2>–£–∫—Ä–∞–ª–∞ –º–æ–µ —Å–µ—Ä–¥—Ü–µ........</h2>";

            setTimeout(startTest, 1500);
        } else {
            spawnHeart();
        }
    };

    document.getElementById("game").appendChild(heart);
}

//
// 2Ô∏è‚É£ –¢–ï–°–¢
//
const questions = [
{
    q: "–¢—ã –∫–∞–∫ –≤–∞—â–µ –ª—é–±–∏—à—å –î–∞–Ω—å–∫–∞?",
    a: ["–î–∞", "–û—á–µ–Ω—å", "–ë–µ–∑—É–º–Ω–æ"]
},
{
    q: "–ö—Ç–æ —Å–∞–º—ã–π –ª—É—á—à–∏–π —á–µ–ª–æ–≤–µ–∫?",
    a: ["–î–∞–Ω–∏–∏–ª –ß—É–º–∞–∫–æ–≤", "–ó–∞–∫–∏–∫—é", "–î–∞–Ω—è"]
}
];

let qIndex = 0;

function startTest(){
    show("testScreen");
    renderQuestion();
}

function renderQuestion(){
    const q = questions[qIndex];
    let html = "<h2>"+q.q+"</h2>";

    q.a.forEach(ans => {
        html += `<div class="answer" onclick="nextQ()">${ans}</div>`;
    });

    document.getElementById("question").innerHTML = html;
}

function nextQ(){
    qIndex++;

    if(qIndex >= questions.length){
        startTimeScreen();
    } else {
        renderQuestion();
    }
}

//
// 3Ô∏è‚É£ –í–†–ï–ú–Ø –í–ú–ï–°–¢–ï
//
function startTimeScreen(){
    show("timeScreen");

    const startDate = new Date("2024-09-01"); // ‚Üê –ø–æ—Å—Ç–∞–≤—å —Å–≤–æ—é –¥–∞—Ç—É

    function update(){
        const now = new Date();
        const diff = now - startDate;

        const days = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor(diff / (1000*60*60));
        const minutes = Math.floor(diff / (1000*60));
        const seconds = Math.floor(diff / 1000);

        document.getElementById("time").innerHTML =
            days + " –¥–Ω–µ–π<br>" +
            hours + " —á–∞—Å–æ–≤<br>" +
            minutes + " –º–∏–Ω—É—Ç<br>" +
            seconds + " —Å–µ–∫—É–Ω–¥ ‚ù§Ô∏è";
    }

    update();
    setInterval(update, 1000);

    // –ß–µ—Ä–µ–∑ 3 —Å–µ–∫ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ
    setTimeout(() => {
        document.getElementById("finalText").style.opacity = 1;
        document.getElementById("secretBtn").style.opacity = 1;
        startConfetti();
    }, 3000);
}
function showSecret(){
    document.getElementById("secret").style.display = "block";
}

function startConfetti(){
    const container = document.getElementById("confetti");

    setInterval(() => {
        const heart = document.createElement("div");
        heart.innerHTML = "‚ù§Ô∏è";
        heart.style.position = "absolute";
        heart.style.left = Math.random()*100 + "%";
        heart.style.top = "-20px";
        heart.style.fontSize = "24px";
        heart.style.animation = "fall 4s linear";
        container.appendChild(heart);

        setTimeout(()=>heart.remove(),4000);
    }, 300);
}

</script>

</body>
</html>
